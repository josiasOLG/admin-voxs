<div class="mb-4">
  <div
    class="flex justify-content-between align-items-center mb-3"
    *ngIf="showAddButton"
  >
    <h5 class="m-0">Categorias</h5>
    <p-button
      label="Nova Categoria"
      icon="pi pi-plus"
      styleClass="p-button-success p-button-sm"
      (click)="onAdd()"
    >
    </p-button>
  </div>

  <p-table
    [value]="categories"
    styleClass="p-datatable-striped"
    responsiveLayout="scroll"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Nome</th>
        <th>Status</th>
        <th style="width: 8rem">Ações</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-category let-i="rowIndex">
      <tr>
        <td>{{ category.name }}</td>
        <td>
          <p-tag
            [value]="category.active ? 'Ativo' : 'Inativo'"
            [severity]="category.active ? 'success' : 'danger'"
          >
          </p-tag>
        </td>
        <td>
          <div class="flex gap-2">
            <p-button
              [icon]="category.active ? 'pi pi-eye-slash' : 'pi pi-eye'"
              styleClass="p-button-text p-button-sm"
              [class]="
                category.active ? 'p-button-warning' : 'p-button-success'
              "
              (click)="onToggleActive(i)"
              [pTooltip]="category.active ? 'Desativar' : 'Ativar'"
            >
            </p-button>
            <p-button
              icon="pi pi-pencil"
              styleClass="p-button-text p-button-sm"
              (click)="onEdit(i)"
              pTooltip="Editar"
            >
            </p-button>
            <p-button
              icon="pi pi-trash"
              styleClass="p-button-text p-button-danger p-button-sm"
              (click)="onRemove(i)"
              pTooltip="Remover"
            >
            </p-button>
          </div>
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="3" class="text-center py-4">
          <span class="text-500">Nenhuma categoria adicionada</span>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
