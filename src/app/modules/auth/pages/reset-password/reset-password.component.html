<div class="reset-password-container">
  <div class="reset-password-wrapper">
    <p-card class="reset-password-card">
      <ng-template pTemplate="header">
        <div class="reset-password-header">
          <div class="logo-container">
            <img src="assets/logo.png" alt="Logo" class="logo" />
          </div>
          <h2 class="reset-password-title">Nova Senha</h2>
          <p class="reset-password-subtitle">
            Digite sua nova senha para a conta<br />
            <strong>{{ email }}</strong>
          </p>
        </div>
      </ng-template>

      <form
        [formGroup]="resetPasswordForm"
        (ngSubmit)="onSubmit()"
        class="reset-password-form"
      >
        <input type="hidden" formControlName="email" />

        <div class="form-group">
          <p-floatlabel>
            <p-password
              formControlName="password"
              inputId="password"
              [feedback]="true"
              [toggleMask]="true"
              [class.ng-invalid]="hasFieldError('password')"
              styleClass="w-full"
              inputStyleClass="w-full"
              autocomplete="new-password"
            ></p-password>
            <label for="password">Nova Senha</label>
          </p-floatlabel>
          <app-validate-input
            [control]="resetPasswordForm.get('password')!"
            [error]="getFieldError('password')"
          ></app-validate-input>
        </div>

        <div class="form-group">
          <p-floatlabel>
            <p-password
              formControlName="confirmPassword"
              inputId="confirmPassword"
              [feedback]="false"
              [toggleMask]="true"
              [class.ng-invalid]="hasFieldError('confirmPassword')"
              styleClass="w-full"
              inputStyleClass="w-full"
              autocomplete="new-password"
            ></p-password>
            <label for="confirmPassword">Confirmar Nova Senha</label>
          </p-floatlabel>
          <app-validate-input
            [control]="resetPasswordForm.get('confirmPassword')!"
            [error]="getFieldError('confirmPassword')"
          ></app-validate-input>
        </div>

        <div class="form-actions">
          <p-button
            type="submit"
            label="Redefinir Senha"
            styleClass="w-full primary-button"
            [loading]="loading$ | async"
            [disabled]="loading$ | async"
          ></p-button>
        </div>

        <p-divider align="center">
          <span class="divider-text">ou</span>
        </p-divider>

        <div class="back-section">
          <p-button
            type="button"
            label="Voltar ao Login"
            styleClass="w-full secondary-button"
            (onClick)="backToLogin()"
          ></p-button>
        </div>
      </form>
    </p-card>
  </div>
</div>

