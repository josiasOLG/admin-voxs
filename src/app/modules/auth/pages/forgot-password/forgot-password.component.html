<div class="auth-container">
  <!-- Left Side - Visual -->
  <div class="auth-visual">
    <div class="auth-visual__overlay"></div>
    <div class="auth-visual__content">
      <div class="auth-visual__logo">
        <img
          src="assets/logo.png"
          alt="Logo"
          class="logo"
          onerror="this.style.display='none'"
        />
      </div>

      <div *ngIf="!emailSent">
        <h1 class="auth-visual__title">
          Não se preocupe,
          <span class="gradient-text">estamos aqui para ajudar</span>
        </h1>
        <p class="auth-visual__description">
          Esqueceu sua senha? Sem problemas! Digite seu email e enviaremos
          instruções detalhadas para criar uma nova senha de forma segura.
        </p>

        <!-- Info Cards -->
        <div class="info-cards">
          <div class="info-card">
            <i class="pi pi-shield"></i>
            <div class="info-card__content">
              <h3>Seguro</h3>
              <p>Processo 100% seguro</p>
            </div>
          </div>
          <div class="info-card">
            <i class="pi pi-bolt"></i>
            <div class="info-card__content">
              <h3>Rápido</h3>
              <p>Receba em segundos</p>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="emailSent" class="success-visual">
        <div class="success-visual__icon">
          <i class="pi pi-check-circle"></i>
        </div>
        <h1 class="auth-visual__title">
          Email enviado
          <span class="gradient-text">com sucesso!</span>
        </h1>
        <p class="auth-visual__description">
          Verifique sua caixa de entrada e siga as instruções para redefinir sua
          senha. Não esqueça de verificar a pasta de spam.
        </p>
      </div>
    </div>
  </div>

  <!-- Right Side - Form -->
  <div class="auth-form-wrapper">
    <div class="auth-form-container">
      <!-- Formulário de recuperação -->
      <div *ngIf="!emailSent">
        <div class="auth-form-header">
          <h2 class="auth-form-title">Recuperar senha</h2>
          <p class="auth-form-subtitle">
            Digite seu email cadastrado para continuar
          </p>
        </div>

        <form
          [formGroup]="forgotPasswordForm"
          (ngSubmit)="onSubmit()"
          class="auth-form"
        >
          <div class="form-field">
            <label for="email" class="form-label">
              <i class="pi pi-envelope"></i>
              Email
            </label>
            <input
              pInputText
              id="email"
              formControlName="email"
              type="email"
              [class.error]="hasFieldError('email')"
              placeholder="seu@email.com"
              autocomplete="email"
            />
            <app-validate-input
              [control]="forgotPasswordForm.get('email')!"
              [error]="getFieldError('email')"
            ></app-validate-input>
          </div>

          <p-button
            type="submit"
            label="Enviar Instruções"
            icon="pi pi-send"
            styleClass="w-full auth-submit-btn"
            [loading]="loading$ | async"
            [disabled]="loading$ | async"
          ></p-button>

          <div class="auth-divider">
            <span>ou</span>
          </div>

          <div class="auth-redirect">
            <p>
              Lembrou sua senha?
              <a routerLink="/auth/login" class="redirect-link">
                Voltar ao login
                <i class="pi pi-arrow-right"></i>
              </a>
            </p>
          </div>
        </form>
      </div>

      <!-- Tela de sucesso -->
      <div *ngIf="emailSent" class="success-content">
        <div class="success-card">
          <div class="success-card__icon">
            <i class="pi pi-envelope"></i>
          </div>
          <h3 class="success-card__title">Verifique seu email</h3>
          <p class="success-card__description">
            Enviamos um link de recuperação para
            <strong>{{ forgotPasswordForm.get("email")?.value }}</strong>
          </p>
        </div>

        <div class="success-actions">
          <p-button
            type="button"
            label="Reenviar Email"
            icon="pi pi-refresh"
            styleClass="w-full auth-submit-btn"
            (onClick)="resendEmail()"
            [loading]="loading$ | async"
            [disabled]="loading$ | async"
          ></p-button>

          <p-button
            type="button"
            label="Voltar ao Login"
            icon="pi pi-arrow-left"
            styleClass="w-full auth-secondary-btn"
            (onClick)="backToLogin()"
          ></p-button>
        </div>
      </div>
    </div>
  </div>
</div>
