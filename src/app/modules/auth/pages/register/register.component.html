<div class="register-container">
  <div class="register-wrapper">
    <p-card class="register-card">
      <ng-template pTemplate="header">
        <div class="register-header">
          <div class="logo-container">
            <img src="assets/logo.png" alt="Logo" class="logo" />
          </div>
          <h2 class="register-title">Criar Conta</h2>
          <p class="register-subtitle">
            Preencha os dados para criar sua conta
          </p>
        </div>
      </ng-template>

      <form
        [formGroup]="registerForm"
        (ngSubmit)="onSubmit()"
        class="register-form"
      >
        <div class="form-group">
          <p-floatlabel>
            <input
              pInputText
              id="name"
              formControlName="name"
              type="text"
              [class.ng-invalid]="hasFieldError('name')"
              class="w-full"
              autocomplete="name"
            />
            <label for="name">Nome Completo</label>
          </p-floatlabel>
          <app-validate-input
            [control]="registerForm.get('name')!"
            [error]="getFieldError('name')"
          ></app-validate-input>
        </div>

        <div class="form-group">
          <p-floatlabel>
            <input
              pInputText
              id="email"
              formControlName="email"
              type="email"
              [class.ng-invalid]="hasFieldError('email')"
              class="w-full"
              autocomplete="email"
            />
            <label for="email">Email</label>
          </p-floatlabel>
          <app-validate-input
            [control]="registerForm.get('email')!"
            [error]="getFieldError('email')"
          ></app-validate-input>
        </div>

        <div class="form-group">
          <p-floatlabel>
            <p-dropdown
              formControlName="role"
              [options]="roleOptions"
              optionLabel="label"
              optionValue="value"
              placeholder="Selecione um tipo"
              styleClass="w-full"
            ></p-dropdown>
            <label for="role">Tipo de Usuário</label>
          </p-floatlabel>
          <app-validate-input
            [control]="registerForm.get('role')!"
            [error]="getFieldError('role')"
          ></app-validate-input>
        </div>

        <div class="form-group">
          <p-floatlabel>
            <p-password
              formControlName="password"
              inputId="password"
              [feedback]="true"
              [toggleMask]="true"
              [class.ng-invalid]="hasFieldError('password')"
              styleClass="w-full"
              inputStyleClass="w-full"
              autocomplete="new-password"
            ></p-password>
            <label for="password">Senha</label>
          </p-floatlabel>
          <app-validate-input
            [control]="registerForm.get('password')!"
            [error]="getFieldError('password')"
          ></app-validate-input>
        </div>

        <div class="form-group">
          <p-floatlabel>
            <p-password
              formControlName="confirmPassword"
              inputId="confirmPassword"
              [feedback]="false"
              [toggleMask]="true"
              [class.ng-invalid]="hasFieldError('confirmPassword')"
              styleClass="w-full"
              inputStyleClass="w-full"
              autocomplete="new-password"
            ></p-password>
            <label for="confirmPassword">Confirmar Senha</label>
          </p-floatlabel>
          <app-validate-input
            [control]="registerForm.get('confirmPassword')!"
            [error]="getFieldError('confirmPassword')"
          ></app-validate-input>
        </div>

        <div class="form-actions">
          <p-button
            type="submit"
            label="Criar Conta"
            styleClass="w-full register-button"
            [loading]="loading$ | async"
            [disabled]="loading$ | async"
          ></p-button>
        </div>

        <p-divider align="center">
          <span class="divider-text">ou</span>
        </p-divider>

        <div class="login-section">
          <p class="login-text">
            Já tem uma conta?
            <a routerLink="/auth/login" class="login-link"> Fazer login </a>
          </p>
        </div>
      </form>
    </p-card>
  </div>
</div>

